<!doctype html>

<html>

<head>

    <title>Capture The Campus</title>


    <style>
        #map { height: 80vh; }

    </style>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14="
crossorigin=""/>

<script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg="
crossorigin=""></script>

</head>

<body style="background-color:rgb(0, 0, 0);">

    <h1 style="text-align:center;">Capture The Campus</h1>

    





    <!--  Main Site, to contain a welcome screen with an explination on how to play-->
    <div id="mainpage" style="background-color:rgb(0, 0, 0);border: 5px solid #000000 ">

       
        <p id="demo" style="background-color:rgb(255, 255, 255);border: 5px solid #000000 "></p>


    </div>
    <!-- End Of Main Site -->

    <div id="map"></div>


</body>
 
<script>
    
    var map;

    var x = document.getElementById("demo");
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }
    
    function showPosition(position) {
      x.innerHTML = "Latitude: " + position.coords.latitude +
      "<br>Longitude: " + position.coords.longitude;

      if(map != null){
        var user = L.marker([position.coords.latitude, position.coords.longitude]).addTo(map);
      }
    }

    //var loop = setInterval(test, 1000);
    setInterval(getLocation, 1000);



    function setLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPositionmap);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }
    function showPositionmap(position) {
      //x.innerHTML = "Latitude: " + position.coords.latitude +
      //"<br>Longitude: " + position.coords.longitude;
      map = L.map('map').setView([position.coords.latitude, position.coords.longitude], 13);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

    }

    setLocation();
    //var map = L.map('map').setView([51.505, -0.09], 13);

    



    /*
    function test(){
        getText("http://website.com/webpage.php");
    }


    async function getText(file) {
      let myObject = await fetch(file);
      let myText = await myObject.text();
      document.getElementById("demo").innerHTML = myText;
    }*/

</script>


</html>